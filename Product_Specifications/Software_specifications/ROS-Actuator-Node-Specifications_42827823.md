1. [Sous-Marin ASUQTR](index.html)
2. [Sous-Marin ASUQTR Knowledge Center](Sous-Marin-ASUQTR-Knowledge-Center_5144578.html)
3. [Product Specifications](Product-Specifications_37355662.html)
4. [Software Specifications](Software-Specifications_42827905.html)

# Sous-Marin ASUQTR : ROS Actuator Node Specifications

Created by Unknown User (laurieb), last modified by Gabriel Tremblay on Nov 20, 2020

||
<colgroup><col /><col /></colgroup>|---|
|Target release|1.0|
|Epic|[![](https://jira.asuqtr.com/images/icons/issuetypes/story.svg)ASUQTR-571](https://jira.asuqtr.com/browse/ASUQTR-571?src=confmacro) - Documentation actuator/sensor node Done|
|Document status|DRAFT|
|Document owner|[Laurie B&eacute;liveau](https://confluence.asuqtr.com/display/~Laurieb)|
|Designer|[William Flynn](https://confluence.asuqtr.com/display/~CrimsonCrow)|
|Developers|[Gabriel Tremblay](https://confluence.asuqtr.com/display/~Tremblayg)|
|QA||

# \[  \] \[ [General Abstract](#ROSActuatorNodeSpecifications-GeneralAbstract) \] \[ [Actuator Node Main Goal](#ROSActuatorNodeSpecifications-ActuatorNodeMainGoal) \] \[ [I2C PROTOCOL](#ROSActuatorNodeSpecifications-I2CPROTOCOL) \] \[ [PCA9685 Pinouts](#ROSActuatorNodeSpecifications-PCA9685Pinouts) \] \[ [Actuators Involved](#ROSActuatorNodeSpecifications-ActuatorsInvolved) \]

# General Abstract

## *Actuator Node Main Goal*

This ROS node purpose is to control PWM actuators via I2C on Nvidia JETSON XAVIER. This node receive messages from ROS network and send a PWM command via PCA9685 Servo Driver to the specific actuator output.

![](attachments/42827823/42827824.png)

## *I2C PROTOCOL*

This communication protocol allows, with only 2 wires (SCL, SDA), to have one master communicating to multiple slaves. In this node, the device we are using, PCA9685, drives up to 16 channels over I2C protocol. In our case, the master is the JETSON XAVIER (microcontroller) and the slave is the PCA9685 Servo Driver. To communicate with a specific slave, the master must have the I2C slave address:

```
PCA9685_ADDR = 0x40
```

Also, [Adafruit\_pca9685](https://github.com/adafruit/Adafruit_CircuitPython_PCA9685) library is required to initialize PCA9685 Servo Driver output pins to each specific actuators. More precisely, each output pin corresponds to one of the 16 channels objets of the PCAChannels Class.

```
 motors = [T200Thruster(channels[i]) for i in motor_pins]
```

# PCA9685 [Pinouts](https://learn.adafruit.com/16-channel-pwm-servo-driver/pinouts)

|||||
<colgroup><col /><col /><col /><col /></colgroup>|---|---|---|:---:|
|Pin #|Actuator Name|Protocol|PWM Range|
|\[ 0 - 7 \]|T200Thruster|I2C|\[ 1100-1900 \]|
|8|NewtonSubseaGripper|I2C|\[ 1100-1900 \]|
|\[ 9 - 10 \]|LumenSubseaLight|I2C|\[ 1100-1900 \]|

# Actuators Involved

|||||
<colgroup><col /><col /><col /><col /></colgroup>|:---|:---|:---|---|
|Name|Inherited Class|Subscribes to|Description|
|T200Thruster![](attachments/42827823/42827825.png)|[ContinuousServo](https://circuitpython.readthedocs.io/projects/motor/en/latest/_modules/adafruit_motor/servo.html)|[/motors](ROS-Topics-Specifications_40697968.html)|Those motors are powering our AUV underwater. It is driven by a 16-Channel PWM Servo Driver which is controlled by a msg coming from the ROS network via I2C. When a message is received it calls the *actuator\_cb\_corrected* (callback) function.|
|NewtonSubseaGripper![](attachments/42827823/42827826.png)|[ContinuousServo](https://circuitpython.readthedocs.io/projects/motor/en/latest/_modules/adafruit_motor/servo.html)|[/grippers](ROS-Topics-Specifications_40697968.html)|This gripper is needed to pick object underwater. It is driven by a 16-Channel PWM Servo Driver which is controlled by a msg coming from the ROS network via I2C. When a message is received it calls the *actuator\_cb* (callback) function.|
|LumenSubseaLight![](attachments/42827823/42827827.png)|[ContinuousServo](https://circuitpython.readthedocs.io/projects/motor/en/latest/_modules/adafruit_motor/servo.html)|[/leds](ROS-Topics-Specifications_40697968.html)|Those lights are needed to illuminate the underwater environment in front of the AUV. It is driven by a 16-Channel PWM Servo Driver which is controlled by a msg coming from the ROS network via I2C. When a message is received it calls the *actuator\_cb*(callback) function.|

## Attachments:

![](images/icons/bullet_blue.gif) [Blank diagram (7).png](attachments/42827823/42827824.png) (image/png)  
![](images/icons/bullet_blue.gif) [t200thrusters.PNG](attachments/42827823/42827825.png) (image/png)  
![](images/icons/bullet_blue.gif) [newton subsea gripper.PNG](attachments/42827823/42827826.png) (image/png)  
![](images/icons/bullet_blue.gif) [lumensubsealight.PNG](attachments/42827823/42827827.png) (image/png)

Document generated by Confluence on May 02, 2023 17:22

[Atlassian](https://www.atlassian.com/)